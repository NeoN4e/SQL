
/*
Написать такие функции:
Функцию, возвращающую кол-во студентов, которые не брали книги.
Функцию, возвращающую минимальное из трех переданных параметров.
Функцию, которая принимает в качестве параметра двухразрядное число и определяет какой из разрядов больше, либо они равны. (используйте % - деление по модулю. Например: 57%10=7)
Функцию, возвращающую кол-во взятых книг по каждой из групп и по каждой из кафедр (departments).
Функцию, которая возвращает список библиотекарей и кол-во выданных каждым из них книг.



Написать такие триггера:
Чтобы при взятии определенной книги, ее кол-во уменьшалось на 1.
Чтобы при возврате определенной книги, ее кол-во увеличивалось на 1.
Чтобы нельзя было выдать книгу, которой уже нет в библиотеке (по кол-ву).
Чтобы нельзя было выдать более трех книг одному студенту.
Чтобы при удалении книги, данные о ней копировались в таблицу Удаленные.
Если книга добавляется в базу, она должна быть удалена из таблицы Удаленные.
*/

--Функцию, возвращающую кол-во студентов, которые не брали книги.
/*
Alter Function SCountWithOutBooks() returns int
as
begin
	declare @Rezalt int
	select @Rezalt=Count(id) from Students
	where id != all(select Id_Student from S_Cards)

	return @Rezalt
end

GO
Print  dbo.SCountWithOutBooks()
*/

--Функцию, возвращающую минимальное из трех переданных параметров.
--Create Function My3Min(@a int, @b int, @c int) 
--	returns int
--as
--begin
	
--	if((@a<=@b) and (@a<=@c)) return @a

--	if((@b<=@a) and (@b<=@c)) return @b
	
--	return @c
--end

--Go
--Print dbo.My3Min(1,3,5)


--Функцию, которая принимает в качестве параметра двухразрядное число и определяет какой из разрядов больше, либо они равны. (используйте % - деление по модулю. Например: 57%10=7)
--Alter Function MyIntTest(@value int) returns int
--as
--begin
--	declare @Counter int
--	set @Counter=1

--	declare @MinValue int
--	set @MinValue = (@value % 10)
	
--	declare @temp int

--	while(@value/(10*@Counter) > 1)
--	begin
--		set @Counter = @Counter + 1
--		set @temp = @value%(10*@Counter)

--		if (@temp < @MinValue) set @MinValue=@temp
--	end

--	return @MinValue
--end
Go
print dbo.MyIntTest(23)